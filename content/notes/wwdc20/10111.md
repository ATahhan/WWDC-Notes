---
contributors: skhillon
---

## Overview
This talk is about things you should do on your app and on your server to provide the best user experience.

Topics covered:

1. Performance
2. Security
3. Mobility
4. Privacy

Note that the technologies discussed in this talk must be supported on both the client and server. If you're using Apple APIs like `URLSession` and `Network.framework` on the client, you're good to go.

Mainly, you'll have to update your servers.

## 1. Performance
### IPv6
This is the latest version of the Internet Protocol. Connections using IPv6 have lower latency.

Test that your app works on IPv6-only networks with the NAT64 support in internet sharing on your app. This is an App Store submission requirement.

If you use modern networking APIs, it should "just work".

Here are some stats:

![][ipv6_stats]

An important take-away is that 20% of applications could get performance gains if their server enabled IPv6.

### HTTP/2
`URLSession` has this built-in, which improves load performance by multiplexing multiple requests to a server on a single connection. This means you don't need to wait for a response from one request to launch another.

HTTP/2 also provides performance improvements through connection coalescing. This is when the framework recognizes that the next request is to the same server, so it can reuse an existing connection. This saves connection setup costs.

Header compression removes extraneous bytes on requests and responses, which means there's less data to send over the network.

To learn more about how HTTP/2 can benefit your app, see [Optimizing Your App for Today's Internet](https://developer.apple.com/videos/play/wwdc2018/714/)

HTTP/2 statistics:
![][http2_stats]

`URLSession` will automatically use HTTP/2 on the client if the server uses HTTP/2.

## 2. Security

TLS 1.3 provides faster handshake and improved security. It is enabled by default in `URLSession` and `Network.framework` starting with iOS 13.4 and macOS Mojave (as long as it's enabled on your server).

Stats:
![][tls_stats]

## 3. Mobility
Multipath TCP allows a single TCP connection from your app to switch between networks. This way, you can reuse one connection instead of starting new ones if the network is flaky or the user is moving in-and-out of service areas.

Use the `multipathServiceType` property on `URLSessionConfiguration` (if using `URLSession`) or `NWParameters` (if using `Network.framework`).

Apple integrated this in their Music app and got these stats:

![][tcp_stats]

To find instructions for enabling Multipath TCP on your server, visit [https://multipath-tcp.org](https://multipath-tcp.org/).

## 4. Privacy
### Overview
- iOS 14 improves privacy protections.
- System services (AirPlay, AirPrint, HomeKit, etc.) protect privacy by default; apps don't know what you're printing or streaming.
- Other local network access requires user permission.

For more information, watch [Support Local Network Privacy In Your App](https://developer.apple.com/videos/play/wwdc2020/10110/).

### DNS Privacy
New in iOS 14 and macOS Big Sur is support for secure DNS.

![][dns]

For details on how to take advantage of new DNS APIs, see [Enable Encrypted DNS](10047.md).

### Looking Forward

![][encrypted_tls_handshakes]

Also, HTTP/3 is coming out. This is built on top of the new QUIC transport protocol, which has built-in TLS 1.3 security. Features:

- Multiplexed stream support, but with further reductions to head-of-line blocking than in HTTP/2. This means losses of any individual requests/responses won't hold up other, potentially unrelated, requests.
- Improved congestion control and loss recovery.
- Built-in mobility so you can move from network to network without interruption.
- IETF standardization in progress.

iOS 14 and macOS Big Sur include an experimental preview of HTTP/3 support. In iOS, you can enable this in Developer Settings for `URLSession` and try it out in Safari under Experimental settings.

![][experimental_http3]

In macOS Big Sur, you can also enable HTTP/3 for apps that use `URLSession`:

![][experimental_http3_mac]

Apple is looking for developers to try out HTTP/3 and file bugs!

[ipv6_stats]: ../../../images/notes/wwdc20/10111/ipv6_stats.png

[http2_stats]: ../../../images/notes/wwdc20/10111/http2_stats.png

[tls_stats]: ../../../images/notes/wwdc20/10111/tls_stats.png

[tcp_stats]: ../../../images/notes/wwdc20/10111/tcp_stats.png

[dns]: ../../../images/notes/wwdc20/10111/dns.png

[encrypted_tls_handshakes]: ../../../images/notes/wwdc20/10111/encrypted_tls_handshakes.png

[experimental_http3]: ../../../images/notes/wwdc20/10111/experimental_http3.png

[experimental_http3_mac]: ../../../images/notes/wwdc20/10111/experimental_http3_mac.png
